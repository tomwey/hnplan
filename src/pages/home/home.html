<!--
  Generated template for the HomePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>

  <ion-navbar color="primary">
    <ion-buttons start *ngIf="isAndroid">
      <button ion-button icon-only (click)="back();">
        <ion-icon name="ios-arrow-back-outline"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>
      计划
      <!-- <button ion-button class="limit-width1" text-wrap (click)="selectProject();">{{currentProject.name || '选择项目'}} <ion-icon name="md-arrow-dropdown"></ion-icon></button> -->
    </ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="changeStats();">
        <ion-icon name="ios-stats-outline"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
  <ion-toolbar color="white">
    <ion-segment [(ngModel)]="dataType" mode="md" (ionChange)="segmentChanged($event)">
      <ion-segment-button value="{{type.value}}" *ngFor="let type of dataTypes">
        {{type.label}}
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>

</ion-header>

<ion-content>
  <ion-calendar *ngIf="dataType === '0'" [(ngModel)]="currentDate" #calendar [options]="dateOptions"
    (onChange)="changeDate($event);" (monthChange)="changeMonth($event);" [format]="'YYYY-MM-DD'">
  </ion-calendar>
  <div class="custom-select-month" *ngIf="dataType != '0'">
    <button ion-button clear class="switch-btn">
      2019 年 06 月&nbsp;<ion-icon name="md-arrow-dropdown"></ion-icon>
    </button>
    <button ion-button class="back" clear>
      <ion-icon name="ios-arrow-back"></ion-icon>
    </button>
    <button ion-button class="forward" clear>
      <ion-icon name="ios-arrow-forward"></ion-icon>
    </button>
  </div>
  <div class="weeks" *ngIf="dataType === '1'">
    <!-- <ion-segment [(ngModel)]="weekIndex" mode="md" (ionChange)="segmentChanged($event)">
      <ion-segment-button [value]="i" *ngFor="let week of weeks;let i = index">
        {{week.name}}<br>{{week.date}}
      </ion-segment-button>
    </ion-segment> -->
    <div class="week-wrap">
      <div class="week" [class.active]="weekIndex === i" tappable (click)="selectWeek(i);"
        *ngFor="let week of weeks;let i = index">
        <h4 class="name">{{week.name}}</h4>
        <p class="date">{{week.date}}</p>
      </div>
    </div>
  </div>
  <div class="plan-list">
    <ion-list>
      <div class="plan-item type-{{item.type}}" *ngFor="let item of plans">
        <div class="left">
          <p class="date">6<span class="unit">日</span></p>
          <p class="year-month">2019年6月</p>
        </div>
        <div class="center">
          <h2 class="name">
            计划管理系统APP端功能规划初稿
          </h2>
          <div class="tags">
            <span class="tag tag-{{item.type}}">{{item.typename}}</span>
            <span class="tag">集团管理类</span>
            <span class="tag">部门内部</span>
            <span class="tag">四级</span>
          </div>

          <!-- <p class="summary">&nbsp;部门内部&nbsp;四级</p> -->
        </div>
        <div class="right">
          <div class="progress">
            <p class="value">按期</p>
            <p class="label">完成</p>
          </div>
          <div class="state state-{{item.state}}">已完成</div>
        </div>
      </div>
    </ion-list>
  </div>
</ion-content>